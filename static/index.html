<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Zum Beispiel</title>

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load('visualization', '1', {packages: ['corechart']});
    </script>

    <script type="text/javascript" src="https://gist.github.com/penguinboy/762197/raw/df68d7225ec16aa63b3fdee23fdc7ac18e282786/Object%2520Flatten"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="zumbeispiel.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="zumbeispiel.css">

    <script>
        $(document).ready(function() {
            $("#add-button").click(function () {
                var chartContainerId = "chart" + MetricsChart.utils.randomInt(0, 100000);
                $("body").append("<div class='chart-container' id='" + chartContainerId + "'></div>");

                // take data from the form
                var $metricField = $("#metric-field");

                var $chartName = $("#chart-name-field");
                var chartName = $chartName.val();
                if (chartName == "") {
                    chartName = "Chart for: " + $metricField.val();
                }

                var $summarize = $("#summarize");
                var summarize = $summarize.is(":checked");

                var useName = $("input:radio[name ='useName']:checked").val();
                if (useName == "composed") {
                    useName = $("#composed-name").val();
                }

                // create chart
                new MetricsChart(
                        chartContainerId,
                        $metricField.val(),
                        {
                            "title": chartName,
                            "intervalMs": 5000,
                            "iterations": 300,
                            "summarize": summarize,
                            "seriesNames": useName
                        }
                );

                // reset data in form
                $metricField.val("");
                $chartName.val("");
                $summarize.attr('checked', false);
            });
        });
    </script>
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-md-12" role="main">
            <form class="form-horizontal">
                <div class="form-group">
                    <label for="metric-field" class="col-sm-2 control-label">Metric:</label>
                    <div class="col-sm-6">
                        <input id="metric-field" type="text" class="form-control" value="last5min.endpoints.*.status_codes.2??" autocomplete="off">
                    </div>
                    <div class="col-sm-2">
                        <button id="add-button" class="btn btn-success" type="button">Create Chart</button>
                    </div>
                    <div class="col-sm-2">
                        <a role="button" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                            More Options >>
                        </a>
                    </div>
                </div>
            </form>
            <form class="form-horizontal">
                <div class="collapse" id="collapseExample">
                    <div class="form-group">
                        <label for="chart-name-field" class="col-sm-2 control-label">Chart Title:</label>
                        <div class="col-sm-6">
                            <input id="chart-name-field" type="text" class="form-control" value="" autocomplete="off">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="composed-name" class="col-sm-2 control-label">Series Naming:</label>
                        <div class="col-sm-2">
                            <div class="input-group">
                                <span class="input-group-addon">
                                  <input name="useName" type="radio" value="composed">
                                </span>
                                <input id="composed-name" type="text" class="form-control" autocomplete="off" placeholder="E.g.: 2.5">
                            </div>
                        </div>
                        <div class="col-sm-2">
                            <div class="checkbox">
                                <label>
                                    <input name="useName" type="radio" autocomplete="off" value="diff"> Use diff as name
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-2">
                            <div class="checkbox">
                                <label>
                                    <input name="useName" type="radio" autocomplete="off" value="full" checked="checked"> Use full name
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <div class="checkbox">
                                <label>
                                    <input id="summarize" type="checkbox" autocomplete="off"> Summarize all matching values to a single series
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>